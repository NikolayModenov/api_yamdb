# api_yamdb

### Авторы

1. Николай Моденов  
   - Аккаунт GitHub: [NikolayModenov](https://github.com/NikolayModenov)

2. Дмитрий Банных  
   - Аккаунт GitHub: [DmitryBannykh](https://github.com/DmitryBannykh)

3. Нұркамал Айбек  
   - Аккаунт GitHub: [labanurkamal](https://github.com/labanurkamal/)

## Описание

Проект YaMDb представляет собой платформу для сбора отзывов пользователей на различные произведения, такие как книги, фильмы и музыка. Непосредственно сами произведения не хранятся в системе, а пользователи выражают свои мнения и оценки о них.

Администраторы системы могут добавлять произведения, определяя их категории и жанры. Это обеспечивает удобную структуризацию контента и навигацию для пользователей.

Пользователи могут оставлять отзывы к произведениям, выражая свои благодарности или возмущения, а также ставить оценки в диапазоне от одного до десяти. На основе пользовательских оценок формируется усреднённая оценка произведения, которая отображается как рейтинг. Каждый пользователь может оставить только один отзыв к каждому произведению.

Для обсуждения отзывов пользователи могут добавлять комментарии. Это позволяет создавать общественную дискуссию вокруг произведений и расширять контекст оценки и мнения.

Функционал добавления отзывов, комментариев и оценок доступен только аутентифицированным пользователям, что способствует поддержанию качества контента и исключает анонимные или нежелательные действия.

### Техническое описание проекта YaMDb

В репозитории api_yamdb, по адресу `http://127.0.0.1:8000/redoc/` к нему подключена документация API. В этой документации представлены все доступные эндпоинты, их описания, параметры запросов, примеры ответов и возможные коды ответа. Вся информация о работе с API, включая примеры запросов и ответов, представлена в удобном формате на странице документации.

### Ресурсы API YaMDb:

   - Ресурс auth: аутентификация.
   - Ресурс users: пользователи.
   - Ресурс titles: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
   - Ресурс categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»). Одно произведение может быть привязано только к одной категории.
   - Ресурс genres: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
   - Ресурс reviews: отзывы на произведения. Отзыв привязан к определённому произведению.
   - Ресурс comments: комментарии к отзывам. Комментарий привязан к определённому отзыву.

Каждый ресурс описан в документации: указаны эндпоинты (адреса, по которым можно сделать запрос), разрешённые типы запросов, права доступа и дополнительные параметры, когда это необходимо.

### Пользовательские роли:

   - Аноним — может просматривать описания произведений, читать отзывы и комментарии. 
   - Аутентифицированный пользователь (user) — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю. 
   - Модератор (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии. 
   - Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям. 
   - Суперюзер Django — обладает правами администратора (admin).

### Самостоятельная регистрация новых пользователей:

   1. Пользователь отправляет POST-запрос с параметрами `email` и `username` на эндпоинт `/api/v1/auth/signup/`. 
   2. Сервис YaMDB отправляет письмо с кодом подтверждения (`confirmation_code`) на указанный адрес `email`.
   3.  Пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`. В ответе на запрос ему приходит `token` (JWT-токен).

В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.
После регистрации и получения токена пользователь может отправить PATCH-запрос на эндпоинт `/api/v1/users/me/` и заполнить поля в своём профайле (описание полей — в документации).

### База данных

В директории /api_yamdb/static/data, подготовлены несколько файлов в формате CSV, содержащих контент для различных ресурсов. Эти файлы предоставляют начальные данные для заполнения базы данных при развертывании проекта. Они содержат информацию о пользователях, произведениях, категориях, жанрах, отзывах и комментариях, которые могут использоваться для тестирования и демонстрации функционала системы.

## Команды развертывания. Команды запуска.

1. Клонируйте репозиторий на локальную машину:

    ```bash
    git clone git@github.com:NikolayModenov/api_yamdb.git
    ```

2. Установить зависимости из файла requirements.txt:

    ```bash
    pip install -r requirements.txt
    ```

3. Примените миграции:

    ```bash
    python manage.py migrate
    ```

4. Запустите сервер:

    ```bash
    python manage.py runserver
    ```

## Импорт данных из всех csv-файлов

Вызовите из терминала в соответствующей папке команду:

```bash
python manage.py csv_importer
```


## Список приложений используемых для разработки данного сервиса

Python 3.9.13
Django 3.2
djangorestframework 3.12.4
djangorestframework-simplejwt 4.7.2
PyJWT 2.1.0
pytest 6.2.4
pytest-django 4.4.0